<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>com.f00d4tehg0dz.cookieclicker</title>
    <link rel="stylesheet" href="css/sdpi.css">
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/jquery-3.3.1.js"></script>
    <script src="js/common.js"></script>

</head>

<body>
<div class="sdpi-wrapper">
    <div class="sdpi-item">
        <span>
            <div id="cookieTitle"></div>
            <div id="cookie" onclick="updateButton()">
                <img src="icon-animate.gif" width="50px"/>
            </div>
            <h2>Number of Cookies:</h2>
            <div id="cookieNumbers"></div>
        </span>
    </div>
    <div class="sdpi-item">
        <div class="sdpi-item-label">Instructions</div>
        <details class="sdpi-item-value">
            <p>Click the cookie to make more cookies<br>
            Cookie Title upgrades as you reach cookie clicker milestones <br></p>
            <p>You can learn more about this plugin by visiting its Github
                page by <a
                        href="#"
                        onclick="openGithub()">clicking here.</a>
        </details>
    </div>
</div>

<script>
    let uuid = "",
        actionName = "";

    if ($SD) {
        $SD.on('connected', function (jsonObj) {
            uuid = jsonObj['uuid'];
            if (jsonObj.hasOwnProperty('actionInfo')) {
                actionName = jsonObj.actionInfo.action;
            }
            let settings = $SD.actionInfo.payload.settings;
        });
    }

    $(document).ready(function () {

        $("#updateButton").click(function () {
            // Sending the saved settings to the plugin from property inspector.

            if ($SD && $SD.connection) {
                let payload = {};
                payload.updateClick = updateClick;

                $SD.api.sendToPlugin(uuid, actionName, payload);
            }
        });
        function openGithub() {
            $SD.api.openUrl($SD.actionInfo.context, "https://github.com/f00d4tehg0dz/Doge-Coin-Plugin-for-Eglato-Streamdeck")
    }
    });

</script>

</body>

</html>
